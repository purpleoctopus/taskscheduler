"use strict";(self.webpackChunkdevlight_university=self.webpackChunkdevlight_university||[]).push([[695],{4695:(j,l,r)=>{r.r(l),r.d(l,{SettingsComponent:()=>k});var i=r(467),a=r(8834),d=r(9350),g=r(7707),t=r(4438),m=r(2277),h=r(6722);let v=(()=>{class o{http;constructor(e){this.http=e}getCurrentUser(){var e=this;return(0,i.A)(function*(){const n=yield e.http.get("/users/byToken");if(200===n.status)return n.data})()}delete(){var e=this;return(0,i.A)(function*(){yield e.http.delete("/users/byToken")})()}static \u0275fac=function(n){return new(n||o)(t.KVO(h.k))};static \u0275prov=t.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var f=r(5766),b=r(554);function C(o,s){if(1&o){const e=t.RV6();t.j41(0,"button",1),t.bIt("click",function(){t.eBV(e);const u=t.XpG();return t.Njj(u.global.showLogin.set(!0))}),t.EFF(1,"\u0423\u0432\u0456\u0439\u0442\u0438"),t.k0s(),t.j41(2,"button",1),t.bIt("click",function(){t.eBV(e);const u=t.XpG();return t.Njj(u.global.showRegister.set(!0))}),t.EFF(3,"\u0420\u0435\u0454\u0441\u0442\u0440\u0430\u0446\u0456\u044f"),t.k0s()}}function y(o,s){if(1&o){const e=t.RV6();t.j41(0,"div",0)(1,"h1"),t.EFF(2),t.k0s(),t.j41(3,"div"),t.EFF(4),t.k0s(),t.j41(5,"div"),t.EFF(6),t.k0s(),t.j41(7,"div",2)(8,"button",3),t.bIt("click",function(){t.eBV(e);const u=t.XpG();return t.Njj(u.logout())}),t.EFF(9,"\u0412\u0438\u0439\u0442\u0438"),t.k0s(),t.j41(10,"button",4),t.bIt("click",function(){t.eBV(e);const u=t.XpG();return t.Njj(u.delete())}),t.EFF(11,"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438"),t.k0s()()()}if(2&o){const e=t.XpG();t.R7$(2),t.SpI("\u041f\u0440\u0438\u0432\u0456\u0442, ",e.user.username,""),t.R7$(2),t.Lme("\u0412\u0438 - ",e.user.employee.name,", ",e.user.employee.position,""),t.R7$(2),t.SpI("\u0412\u0430\u0448\u0430 \u043f\u043e\u0448\u0442\u0430: ",e.user.email,"")}}let k=(()=>{class o{global;userService;auth;dialog;user;constructor(e,n,u,c){this.global=e,this.userService=n,this.auth=u,this.dialog=c}ngOnInit(){var e=this;return(0,i.A)(function*(){e.user=yield e.userService.getCurrentUser().showLoading()})()}logout(){this.auth.clearToken(),window.location.reload()}delete(){var e=this;return(0,i.A)(function*(){e.dialog.show.set(!0),(yield function p(o,s){const e="object"==typeof s;return new Promise((n,u)=>{const c=new g.Ms({next:F=>{n(F),c.unsubscribe()},error:u,complete:()=>{e?n(s.defaultValue):u(new d.G)}});o.subscribe(c)})}(e.dialog.dialogData$))&&(yield e.userService.delete()),document.location.reload()})()}static \u0275fac=function(n){return new(n||o)(t.rXU(m.d),t.rXU(v),t.rXU(f.u),t.rXU(b.o))};static \u0275cmp=t.VBU({type:o,selectors:[["app-settings"]],decls:2,vars:1,consts:[[1,"menu-authorized"],["mat-button","",3,"click"],[1,"btn-wrapper"],["mat-button","",1,"logout",3,"click"],["mat-button","",1,"delete",3,"click"]],template:function(n,u){1&n&&t.DNE(0,C,4,0)(1,y,12,4,"div",0),2&n&&t.vxM(u.user?1:0)},dependencies:[a.$z],styles:[".menu-authorized[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;height:calc(100vh - 60px - 4rem)}.menu-authorized[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{text-align:center}.logout[_ngcontent-%COMP%]{background-color:purple}.delete[_ngcontent-%COMP%]{background-color:var(--red-dark);color:var(--red-light)!important}.btn-wrapper[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{border-radius:.75rem}.btn-wrapper[_ngcontent-%COMP%]{margin-top:1.5rem;justify-content:center;gap:10px;display:flex}"]})}return o})()}}]);
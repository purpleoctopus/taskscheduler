"use strict";(self.webpackChunkdevlight_university=self.webpackChunkdevlight_university||[]).push([[733],{1733:(k,l,s)=>{s.r(l),s.d(l,{ProjectViewComponent:()=>b});var a=s(467),e=s(4438);const d=["container"],g=["head"],h=["arrow"],v=["employeesparent"];function y(r,c){if(1&r&&(e.j41(0,"div",8)(1,"div"),e.EFF(2),e.k0s(),e.j41(3,"div"),e.EFF(4,"BUTTONS"),e.k0s()()),2&r){const t=c.$implicit;e.R7$(2),e.JRh(t.name)}}let j=(()=>{class r{owner;employees=[];container;head;arrow;employeesparent;toggleEmployees(){this.arrow.nativeElement.classList.toggle("active");const t=this.employeesparent.nativeElement;t.classList.toggle("active");const o=t.style.height;"px"!=o.substring(o.length-2)?(t.style.height=t.scrollHeight+"px",setTimeout(()=>{t.classList.contains("active")&&(t.style.overflowY="auto")},300)):(t.style.height="",t.style.overflowY="")}static \u0275fac=function(o){return new(o||r)};static \u0275cmp=e.VBU({type:r,selectors:[["app-project-employees"]],viewQuery:function(o,n){if(1&o&&(e.GBs(d,5),e.GBs(g,5),e.GBs(h,5),e.GBs(v,5)),2&o){let i;e.mGM(i=e.lsd())&&(n.container=i.first),e.mGM(i=e.lsd())&&(n.head=i.first),e.mGM(i=e.lsd())&&(n.arrow=i.first),e.mGM(i=e.lsd())&&(n.employeesparent=i.first)}},inputs:{owner:"owner",employees:"employees"},decls:18,vars:1,consts:[["container",""],["head",""],["arrow",""],["employeesparent",""],[1,"container"],[1,"head",3,"click"],[1,"arrow"],[1,"employees"],[1,"employee"],["src","./crown-icon.png",1,"crown-icon"]],template:function(o,n){if(1&o){const i=e.RV6();e.j41(0,"div",4,0)(2,"div",5,1),e.bIt("click",function(){return e.eBV(i),e.Njj(n.toggleEmployees())}),e.j41(4,"div"),e.EFF(5,"\u041b\u044e\u0434\u0438"),e.k0s(),e.j41(6,"div",6,2),e.nrm(8,"span")(9,"span"),e.k0s()(),e.j41(10,"div",7,3)(12,"div",8)(13,"div"),e.EFF(14),e.k0s(),e.nrm(15,"img",9),e.k0s(),e.Z7z(16,y,5,1,"div",8,e.Vm6),e.k0s()()}2&o&&(e.R7$(14),e.JRh(n.owner.name),e.R7$(2),e.Dyx(n.employees))},styles:[".container[_ngcontent-%COMP%]{border-radius:.75rem;overflow:hidden}.head[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:1rem;height:1.25rem;background-color:#929292}.employee[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.employee[_ngcontent-%COMP%]:not(:last-child){margin-bottom:2.25rem}.employees[_ngcontent-%COMP%]{background-color:#515151;height:1.25rem;max-height:70vh;padding:1rem;transition:height .3s ease-out}.crown-icon[_ngcontent-%COMP%]{height:1rem}.arrow[_ngcontent-%COMP%]{height:1rem;width:1rem;rotate:180deg;transition:rotate .3s ease}.arrow.active[_ngcontent-%COMP%]{rotate:0deg}.arrow[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{border-top:4px solid white;position:absolute;width:1rem}.arrow[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:first-child{rotate:-45deg;transform:translate(calc(-.5rem + 2px))}.arrow[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:last-child{rotate:45deg;transform:translate(calc(.5rem - 2px))}"]})}return r})();var f=s(8834),p=s(1245),m=s(4843),u=s(3773),w=s(1279);function C(r,c){if(1&r&&e.nrm(0,"app-project-employees",1),2&r){const t=e.XpG();e.Y8G("owner",t.project.owner)("employees",t.project.employees)}}function P(r,c){if(1&r){const t=e.RV6();e.j41(0,"button",4),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.deleteProject())}),e.EFF(1,"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438"),e.k0s()}}function _(r,c){if(1&r){const t=e.RV6();e.j41(0,"button",4),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.leaveProject())}),e.EFF(1,"\u0412\u0438\u0439\u0442\u0438"),e.k0s()}}let b=(()=>{class r{route;service;router;view;project;isOwner=!1;constructor(t,o,n,i){this.route=t,this.service=o,this.router=n,this.view=i}ngOnInit(){const t=this.route.snapshot;t.params.id&&this.loadProject(t.params.id)}loadProject(t){var o=this;return(0,a.A)(function*(){const[n,i]=yield o.service.getById(t).showLoading();o.project=n,o.isOwner=i})()}inviteEmployee(){this.project&&this.router.navigate([`/invite/${this.project?.id}`])}deleteProject(){var t=this;return(0,a.A)(function*(){const o=t.view.createComponent(p.w),n=yield(0,m._)(o.instance.result$);o.destroy(),n&&t.project&&(yield t.service.deleteById(t.project.id).showLoading(),t.router.navigate(["/projects"]))})()}leaveProject(){var t=this;return(0,a.A)(function*(){const o=t.view.createComponent(p.w),n=yield(0,m._)(o.instance.result$);o.destroy(),n&&t.project&&(yield t.service.leaveById(t.project.id).showLoading(),t.router.navigate(["/projects"]))})()}static \u0275fac=function(o){return new(o||r)(e.rXU(u.nX),e.rXU(w.T),e.rXU(u.Ix),e.rXU(e.c1b))};static \u0275cmp=e.VBU({type:r,selectors:[["app-project-view"]],decls:8,vars:3,consts:[[1,"hat-container"],[3,"owner","employees"],["mat-button","",1,"add",3,"click"],["mat-button","",1,"delete"],["mat-button","",1,"delete",3,"click"]],template:function(o,n){1&o&&(e.j41(0,"div",0)(1,"h1"),e.EFF(2),e.k0s()(),e.DNE(3,C,1,2,"app-project-employees",1),e.j41(4,"button",2),e.bIt("click",function(){return n.inviteEmployee()}),e.EFF(5,"\u0414\u043e\u0434\u0430\u0442\u0438 \u043b\u044e\u0434\u0435\u0439"),e.k0s(),e.DNE(6,P,2,0,"button",3)(7,_,2,0,"button",3)),2&o&&(e.R7$(2),e.JRh(null==n.project?null:n.project.name),e.R7$(),e.vxM(n.project?3:-1),e.R7$(3),e.vxM(n.isOwner?6:7))},dependencies:[j,f.$z],styles:[".delete[_ngcontent-%COMP%]{background-color:var(--red-dark);color:var(--red-light)!important;margin:0 auto;margin-top:2rem}.add[_ngcontent-%COMP%]{background-color:var(--green-dark);color:var(--green-light)!important;margin:0 auto;margin-top:2rem}button[_ngcontent-%COMP%]{display:block;border-radius:.5rem}"]})}return r})()}}]);
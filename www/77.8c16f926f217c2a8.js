"use strict";(self.webpackChunkdevlight_university=self.webpackChunkdevlight_university||[]).push([[77],{1077:(S,p,u)=>{u.r(p),u.d(p,{SettingsComponent:()=>w});var s=u(467),m=u(8834),c=u(4843),h=u(1245),o=u(4341),d=u(1413),t=u(4438),l=u(5766);let v=(()=>{class r{authService;fb;result=new d.B;result$=this.result.asObservable();form;constructor(e,n){this.authService=e,this.fb=n,this.form=n.group({username:["",[o.k0.required]],password:["",[o.k0.required]]})}submit(){var e=this;return(0,s.A)(function*(){e.form.valid&&((yield e.authService.login({username:e.form.value.username,password:e.form.value.password}).showLoading())?e.result.next():e.form.patchValue({password:""}))})()}close(){this.result.next()}static \u0275fac=function(n){return new(n||r)(t.rXU(l.u),t.rXU(o.ok))};static \u0275cmp=t.VBU({type:r,selectors:[["app-login-form"]],decls:16,vars:1,consts:[[1,"shadow"],[1,"form-container"],[1,"close-btn",3,"click"],[1,"form",3,"ngSubmit","formGroup"],["for","username"],["type","text","id","username","formControlName","username"],["for","password"],["type","password","id","password","formControlName","password"],["type","submit","mat-button",""]],template:function(n,i){1&n&&(t.nrm(0,"div",0),t.j41(1,"div",1)(2,"div",2),t.bIt("click",function(){return i.close()}),t.nrm(3,"span")(4,"span"),t.k0s(),t.j41(5,"form",3),t.bIt("ngSubmit",function(){return i.submit()}),t.j41(6,"h2"),t.EFF(7,"\u041b\u043e\u0433\u0456\u043d"),t.k0s(),t.j41(8,"label",4),t.EFF(9,"\u042e\u0437\u0435\u0440\u043d\u0435\u0439\u043c:"),t.k0s(),t.nrm(10,"input",5),t.j41(11,"label",6),t.EFF(12,"\u041f\u0430\u0440\u043e\u043b\u044c:"),t.k0s(),t.nrm(13,"input",7),t.j41(14,"button",8),t.EFF(15,"\u0423\u0432\u0456\u0439\u0442\u0438"),t.k0s()()()),2&n&&(t.R7$(5),t.Y8G("formGroup",i.form))},dependencies:[o.X1,o.qT,o.me,o.BC,o.cb,o.j4,o.JD,m.$z],styles:["button[_ngcontent-%COMP%]{display:block;margin-left:auto;margin-right:auto}input[type=text][_ngcontent-%COMP%], input[type=password][_ngcontent-%COMP%]{margin-top:.5rem}"]})}return r})();var C=u(9489);let b=(()=>{class r{authService;fb;result=new d.B;result$=this.result.asObservable();form;constructor(e,n){this.authService=e,this.fb=n,this.form=n.group({username:["",[o.k0.required,o.k0.minLength(3)]],password:["",[o.k0.required,o.k0.minLength(8)]],email:["",[o.k0.required]],name:["",[o.k0.required]],position:["",[o.k0.required]]})}submit(){var e=this;return(0,s.A)(function*(){e.form.valid?(yield e.authService.register({username:e.form.value.username,password:e.form.value.password,email:e.form.value.email,employee:{name:e.form.value.name,position:e.form.value.position}}).showLoading(),e.result.next()):C.y.show({text:"\u0414\u0430\u043d\u0456 \u0432\u0432\u0435\u0434\u0435\u043d\u043e \u043d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e",duration:"long"})})()}close(){this.result.next()}static \u0275fac=function(n){return new(n||r)(t.rXU(l.u),t.rXU(o.ok))};static \u0275cmp=t.VBU({type:r,selectors:[["app-register-form"]],decls:25,vars:1,consts:[[1,"shadow"],[1,"form-container"],[1,"close-btn",3,"click"],[1,"form",3,"ngSubmit","formGroup"],["for","username"],["type","text","id","username","formControlName","username"],["for","password"],["type","password","id","password","formControlName","password"],["for","email"],["type","text","id","email","formControlName","email"],["for","name"],["type","text","id","name","formControlName","name"],["for","position"],["type","text","id","position","formControlName","position"],["type","submit","mat-button",""]],template:function(n,i){1&n&&(t.nrm(0,"div",0),t.j41(1,"div",1)(2,"div",2),t.bIt("click",function(){return i.close()}),t.nrm(3,"span")(4,"span"),t.k0s(),t.j41(5,"form",3),t.bIt("ngSubmit",function(){return i.submit()}),t.j41(6,"h2"),t.EFF(7,"\u0420\u0435\u0454\u0441\u0442\u0440\u0430\u0446\u0456\u044f"),t.k0s(),t.j41(8,"label",4),t.EFF(9,"\u042e\u0437\u0435\u0440\u043d\u0435\u0439\u043c:"),t.k0s(),t.nrm(10,"input",5),t.j41(11,"label",6),t.EFF(12,"\u041f\u0430\u0440\u043e\u043b\u044c:"),t.k0s(),t.nrm(13,"input",7),t.j41(14,"label",8),t.EFF(15,"\u0415-\u043c\u0435\u0439\u043b:"),t.k0s(),t.nrm(16,"input",9),t.j41(17,"label",10),t.EFF(18,"\u0406\u043c'\u044f"),t.k0s(),t.nrm(19,"input",11),t.j41(20,"label",12),t.EFF(21,"\u041f\u043e\u0437\u0438\u0446\u0456\u044f \u0432 \u043a\u043e\u043c\u043f\u0430\u043d\u0456\u0457 (\u043d\u0430\u043f\u0440\u0438\u043a\u043b\u0430\u0434, Java Senior)"),t.k0s(),t.nrm(22,"input",13),t.j41(23,"button",14),t.EFF(24,"\u0417\u0430\u0440\u0435\u0454\u0441\u0442\u0440\u0443\u0432\u0430\u0442\u0438\u0441\u044c"),t.k0s()()()),2&n&&(t.R7$(5),t.Y8G("formGroup",i.form))},dependencies:[o.X1,o.qT,o.me,o.BC,o.cb,o.j4,o.JD,m.$z],styles:["form[_ngcontent-%COMP%] > input[type=text][_ngcontent-%COMP%]{margin-top:.5rem}.form-container[_ngcontent-%COMP%]{height:32rem;animation:formSlide32 .3s ease-out forwards}button[_ngcontent-%COMP%]{display:block;margin-left:auto;margin-right:auto}input[type=text][_ngcontent-%COMP%], input[type=password][_ngcontent-%COMP%]{margin-top:.5rem}"]})}return r})();var f=u(3773),F=u(9885),k=u(1189);function y(r,g){if(1&r){const e=t.RV6();t.j41(0,"div",0)(1,"h1"),t.EFF(2,"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0456\u044f"),t.k0s(),t.j41(3,"div",1)(4,"button",2),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.login())}),t.EFF(5,"\u0423\u0432\u0456\u0439\u0442\u0438"),t.k0s(),t.j41(6,"button",2),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.register())}),t.EFF(7,"\u0420\u0435\u0454\u0441\u0442\u0440\u0430\u0446\u0456\u044f"),t.k0s()()()}}function _(r,g){1&r&&t.nrm(0,"div",9)}function j(r,g){if(1&r){const e=t.RV6();t.j41(0,"div",3)(1,"h1"),t.EFF(2),t.k0s(),t.j41(3,"div"),t.EFF(4),t.k0s(),t.j41(5,"div"),t.EFF(6),t.k0s(),t.j41(7,"div",4)(8,"button",5),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.logout())}),t.EFF(9,"\u0412\u0438\u0439\u0442\u0438"),t.k0s(),t.j41(10,"button",6),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.delete())}),t.EFF(11,"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438"),t.k0s()()(),t.j41(12,"div",7),t.nrm(13,"img",8),t.DNE(14,_,1,0,"div",9),t.k0s()}if(2&r){const e=t.XpG();t.R7$(2),t.SpI("\u041f\u0440\u0438\u0432\u0456\u0442, ",e.user.username,""),t.R7$(2),t.Lme("\u0412\u0438 - ",e.user.employee.name,", ",e.user.employee.position,""),t.R7$(2),t.SpI("\u0412\u0430\u0448\u0430 \u043f\u043e\u0448\u0442\u0430: ",e.user.email,""),t.R7$(8),t.vxM(e.hasNotification?14:-1)}}let w=(()=>{class r{userService;notification;auth;view;user=null;constructor(e,n,i,a){this.userService=e,this.notification=n,this.auth=i,this.view=a}ngOnInit(){this.loadUser()}get hasNotification(){return this.notification.hasNotification.getValue()}loadUser(){var e=this;return(0,s.A)(function*(){e.user=yield e.userService.getCurrentUser().showLoading()})()}logout(){this.auth.clearToken(),this.user=void 0}login(){var e=this;return(0,s.A)(function*(){const n=e.view.createComponent(v);yield(0,c._)(n.instance.result$),n.destroy(),yield e.loadUser().showLoading()})()}register(){var e=this;return(0,s.A)(function*(){const n=e.view.createComponent(b);yield(0,c._)(n.instance.result$),n.destroy(),yield e.loadUser().showLoading()})()}delete(){var e=this;return(0,s.A)(function*(){const n=e.view.createComponent(h.w);(yield(0,c._)(n.instance.result$))&&(yield e.userService.delete().showLoading()),e.user=void 0,n.destroy()})()}static \u0275fac=function(n){return new(n||r)(t.rXU(F.D),t.rXU(k.J),t.rXU(l.u),t.rXU(t.c1b))};static \u0275cmp=t.VBU({type:r,selectors:[["app-settings"]],decls:2,vars:1,consts:[[1,"menu-center","unauthorized"],[1,"btn-wrapper-vert"],["mat-button","",3,"click"],[1,"menu-center"],[1,"btn-wrapper"],["mat-button","",1,"logout",3,"click"],["mat-button","",1,"delete",3,"click"],["routerLink","/notifications",1,"notification-container"],["src","./bell-icon.png"],[1,"red-dot"]],template:function(n,i){1&n&&t.DNE(0,y,8,0,"div",0)(1,j,15,5),2&n&&t.vxM(void 0===i.user?0:i.user?1:-1)},dependencies:[m.$z,f.iI,f.Wk],styles:[".menu-center[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;height:calc(100vh - 60px - 4rem)}.menu-center[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{text-align:center}.notification-container[_ngcontent-%COMP%]{position:fixed;padding:1rem;top:0;right:0;height:2rem;width:2rem}.notification-container[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{height:100%}.red-dot[_ngcontent-%COMP%]{position:absolute;z-index:100;top:.75rem;right:.75rem;background-color:red;border-radius:2rem;width:.65rem;height:.65rem}h1[_ngcontent-%COMP%]{margin:0;margin-bottom:.5rem}.btn-wrapper-vert[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{display:block;margin:0 auto;margin-bottom:.5rem}.unauthorized[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:not(:last-child){margin-bottom:2rem}.logout[_ngcontent-%COMP%]{background-color:purple}.delete[_ngcontent-%COMP%]{background-color:var(--red-dark);color:var(--red-light)!important}.btn-wrapper[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{border-radius:.75rem}.btn-wrapper[_ngcontent-%COMP%]{margin-top:1.5rem;justify-content:center;gap:10px;display:flex}"]})}return r})()}}]);